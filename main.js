var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,a,b){e!=Array.prototype&&e!=Object.prototype&&(e[a]=b.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(e,a,b,d){if(a){b=$jscomp.global;e=e.split(".");for(d=0;d<e.length-1;d++){var c=e[d];c in b||(b[c]={});b=b[c]}e=e[e.length-1];d=b[e];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(b,e,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.fill",function(e){return e?e:function(a,b,d){var c=this.length||0;0>b&&(b=Math.max(0,c+b));if(null==d||d>c)d=c;d=Number(d);0>d&&(d=Math.max(0,c+d));for(b=Number(b||0);b<d;b++)this[b]=a;return this}},"es6","es3");
var FWcyan=function(){var e,a=Object.create(Object.prototype);a.prototype={};a.prototype.resize=function(){var b=this._canvas.getBoundingClientRect();this._canvas.width=(b.right-b.left)*window.devicePixelRatio;this._canvas.height=(b.bottom-b.top)*window.devicePixelRatio;this._main.disable();b=this._popups.length;for(var a=0;a<b;a++)this._popups[a].disable();null===this._popup_active?this._main.resize({ctx:this._canvas.getContext("2d"),rect:{x:0,y:0,width:this._canvas.width,height:this._canvas.height},
color:this._color}):this._popup_active.resize({ctx:this._canvas.getContext("2d"),rect:{x:0,y:0,width:this._canvas.width,height:this._canvas.height},color:this._color})};a.prototype.onload=function(){window.alert("Welcome to FWcyan!")};a.prototype.setCanvas=function(b){this._canvas=b;"onmousedown"in b&&(b.onmousedown=function(a){var d=b.getBoundingClientRect();a.preventDefault();e.pointStart({pos:{x:(a.clientX-d.left)*window.devicePixelRatio,y:(a.clientY-d.top)*window.devicePixelRatio},rect:{x:0,y:0,
width:b.width,height:b.height}})});"ontouchstart"in b&&(b.ontouchstart=function(a){var d=b.getBoundingClientRect();a.preventDefault();e.pointStart({pos:{x:(a.changedTouches[0].clientX-d.left)*window.devicePixelRatio,y:(a.changedTouches[0].clientY-d.top)*window.devicePixelRatio},rect:{x:0,y:0,width:b.width,height:b.height}})});"onmouseup"in b&&(b.onmouseup=function(a){var d=b.getBoundingClientRect();a.preventDefault();e.pointEnd({pos:{x:(a.clientX-d.left)*window.devicePixelRatio,y:(a.clientY-d.top)*
window.devicePixelRatio},rect:{x:0,y:0,width:b.width,height:b.height}})});"ontouchend"in b&&(b.ontouchend=function(a){var d=b.getBoundingClientRect();a.preventDefault();e.pointEnd({pos:{x:(a.changedTouches[0].clientX-d.left)*window.devicePixelRatio,y:(a.changedTouches[0].clientY-d.top)*window.devicePixelRatio},rect:{x:0,y:0,width:b.width,height:b.height}})});"onmousemove"in b&&(b.onmousemove=function(a){var d=b.getBoundingClientRect();a.preventDefault();e.pointMove({pos:{x:(a.clientX-d.left)*window.devicePixelRatio,
y:(a.clientY-d.top)*window.devicePixelRatio},rect:{x:0,y:0,width:b.width,height:b.height}})});"ontouchmove"in b&&(b.ontouchmove=function(a){var d=b.getBoundingClientRect();a.preventDefault();e.pointMove({pos:{x:(a.changedTouches[0].clientX-d.left)*window.devicePixelRatio,y:(a.changedTouches[0].clientY-d.top)*window.devicePixelRatio},rect:{x:0,y:0,width:b.width,height:b.height}})})};a.prototype.setColor=function(a){if(0<=a&&60>a){var b=255;var c=0;var e=a/60*255}else 60<=a&&120>=a?(e=255,c=0,b=(120-
a)/60*255):120<=a&&180>a?(e=255,b=0,c=(a-120)/60*255):180<=a&&240>a?(c=255,b=0,e=(240-a)/60*255):240<=a&&300>a?(c=255,e=0,b=(a-240)/60*255):300<=a&&360>a&&(b=255,e=0,c=(360-a)/60*255);a=.9*b;e*=.9;c*=.9;b=1-(a+e+c)/765;this._color={};this._color.enable="rgb("+Math.floor(255-.3*(255-a)/b)+","+Math.floor(255-.3*(255-e)/b)+","+Math.floor(255-.3*(255-c)/b)+")";this._color.disable="rgb("+Math.floor(255-.3*(255-a)/(2*b))+","+Math.floor(255-.3*(255-e)/(2*b))+","+Math.floor(255-.3*(255-c)/(2*b))+")"};a.prototype._movepoint=
function(a){null===this._popup_active?this._main.movepoint(a):this._popup_active.movepoint(a)};a.prototype._point=function(a){null===this._popup_active?this._main.point(a):this._popup_active.point(a)};a.prototype.pointStart=function(a){this._isPointMove=this._isPoint=!0;this._posPointStart={};this._posPointStart.x=a.pos.x;this._posPointStart.y=a.pos.y};a.prototype.pointEnd=function(a){!0===this._isPoint&&this._point(a);this._isPointMove=this._isPoint=!1};a.prototype.pointMove=function(a){!0===this._isPointMove&&
this._movepoint(a);!0===this._isPoint&&(this._posPointStart.x-a.pos.x)*(this._posPointStart.x-a.pos.x)+(this._posPointStart.y-a.pos.y)*(this._posPointStart.y-a.pos.y)>Math.min(a.rect.width,a.rect.height)/10*(Math.min(a.rect.width,a.rect.height)/10)&&(this._isPoint=!1)};a.prototype.draw=function(){null===this._popup_active?this._main.draw():this._popup_active.draw()};a.prototype.setMain=function(a){this._main=a};a.prototype.setPopups=function(a){this._popups=a;for(var b=a.length,c=0;c<b;c++)a[c]._parent=
this};a.prototype.Template1=Object.create(Object.prototype);a.prototype.Template1.prototype=Object.create(Object.prototype);a.prototype.Template1.prototype.disable=function(){this._drawer=null;for(var a=this._elements.length,d=0;d<a;d++)this._elements[d].disable()};a.prototype.Template1.prototype.movepoint=function(a){for(var b=this._elements.length,c=0;c<b;c++)if(this._elements_posX[c]<=a.pos.x&&a.pos.x<=this._elements_posX[c]+this._elements_size[c]&&this._elements_posY[c]<=a.pos.y&&a.pos.y<=this._elements_posY[c]+
this._elements_size[c]){this._elements[c].movepoint({pos:{x:a.pos.x-this._elements_posX[c],y:a.pos.y-this._elements_posY[c]},rect:{x:0,y:0,width:this._elements_size[c],height:this._elements_size[c]}});break}};a.prototype.Template1.prototype.point=function(a){for(var b=this._elements.length,c=0;c<b;c++)if(this._elements_posX[c]<=a.pos.x&&a.pos.x<=this._elements_posX[c]+this._elements_size[c]&&this._elements_posY[c]<=a.pos.y&&a.pos.y<=this._elements_posY[c]+this._elements_size[c]){this._elements[c].point({pos:{x:a.pos.x-
this._elements_posX[c],y:a.pos.y-this._elements_posY[c]},rect:{x:0,y:0,width:this._elements_size[c],height:this._elements_size[c]}});break}};a.prototype.Template1.prototype.resize=function(a){this._drawer=a;a.rect.width<a.rect.height?(this._isWide=!1,this._sizeGrid=1.5*a.rect.width<a.rect.height?2*Math.floor(.95*a.rect.width/16):2*Math.floor(.95*a.rect.height/24),this._posX=Math.floor((a.rect.width-8*this._sizeGrid)/2),this._posY=Math.floor((a.rect.height-12*this._sizeGrid)/2)):(this._isWide=!0,this._sizeGrid=
1.5*a.rect.height<a.rect.width?2*Math.floor(.9*a.rect.height/16):2*Math.floor(.9*a.rect.width/24),this._posX=Math.floor((a.rect.width-12*this._sizeGrid)/2),this._posY=Math.floor((a.rect.height-8*this._sizeGrid)/2));this._elements_posX=[null,null,null,null,null,null,null,null,null];this._elements_posY=[null,null,null,null,null,null,null,null,null];this._elements_size=[null,null,null,null,null,null,null,null,null];if(!0===this._isWide){this._elements_posX[0]=this._posX+0*this._sizeGrid;this._elements_posY[0]=
this._posY+0*this._sizeGrid;this._elements_size[0]=8*this._sizeGrid;for(var b=0;8>b;b++)this._elements_posX[b+1]=this._posX+2*this._sizeGrid*(b%2+4),this._elements_posY[b+1]=this._posY+2*this._sizeGrid*Math.floor(b/2),this._elements_size[b+1]=2*this._sizeGrid}else for(this._elements_posX[0]=this._posX+0*this._sizeGrid,this._elements_posY[0]=this._posY+0*this._sizeGrid,this._elements_size[0]=8*this._sizeGrid,b=0;8>b;b++)this._elements_posX[b+1]=this._posX+b%4*this._sizeGrid*2,this._elements_posY[b+
1]=this._posY+2*this._sizeGrid*(Math.floor(b/4)+4),this._elements_size[b+1]=2*this._sizeGrid;var c=this._elements.length;for(b=0;b<c;b++)this._elements[b].resize({ctx:a.ctx,rect:{x:this._elements_posX[b],y:this._elements_posY[b],width:this._elements_size[b],height:this._elements_size[b]},color:a.color});a.ctx.lineWidth=.02*this._sizeGrid};a.prototype.Template1.prototype.draw=function(){this._drawer.ctx.fillStyle=this._drawer.color.disable;this._drawer.ctx.fillRect(this._drawer.rect.x,this._drawer.rect.y,
this._drawer.rect.width,this._drawer.rect.height);for(var a=this._elements.length,d=0;d<a;d++)this._elements[d].draw()};a.prototype.Template1.create=function(a,d){d=d||this.prototype;d=Object.create(d);d._elements=a;return d};a.prototype.Template2=Object.create(Object.prototype);a.prototype.Template2.prototype=Object.create(Object.prototype);a.prototype.Template2.prototype.disable=function(){this._drawer=null;for(var a=this._elements.length,d=0;d<a;d++)this._elements[d].disable()};a.prototype.Template2.prototype.movepoint=
function(a){for(var b=this._elements.length,c=0;c<b;c++)if(this._elements_posX[c]<=a.pos.x&&a.pos.x<=this._elements_posX[c]+this._elements_size[c]&&this._elements_posY[c]<=a.pos.y&&a.pos.y<=this._elements_posY[c]+this._elements_size[c]){this._elements[c].movepoint({pos:{x:a.pos.x-this._elements_posX[c],y:a.pos.y-this._elements_posY[c]},rect:{x:0,y:0,width:this._elements_size[c],height:this._elements_size[c]}});break}};a.prototype.Template2.prototype.point=function(a){for(var b=this._elements.length,
c=0;c<b;c++)if(this._elements_posX[c]<=a.pos.x&&a.pos.x<=this._elements_posX[c]+this._elements_size[c]&&this._elements_posY[c]<=a.pos.y&&a.pos.y<=this._elements_posY[c]+this._elements_size[c]){this._elements[c].point({pos:{x:a.pos.x-this._elements_posX[c],y:a.pos.y-this._elements_posY[c]},rect:{x:0,y:0,width:this._elements_size[c],height:this._elements_size[c]}});break}};a.prototype.Template2.prototype.resize=function(a){this._drawer=a;a.rect.width<a.rect.height?(this._isWide=!1,this._sizeGrid=1.5*
a.rect.width<a.rect.height?2*Math.floor(.95*a.rect.width/16):2*Math.floor(.95*a.rect.height/24),this._posX=Math.floor((a.rect.width-8*this._sizeGrid)/2),this._posY=Math.floor((a.rect.height-12*this._sizeGrid)/2)):(this._isWide=!0,this._sizeGrid=1.5*a.rect.height<a.rect.width?2*Math.floor(.9*a.rect.height/16):2*Math.floor(.9*a.rect.width/24),this._posX=Math.floor((a.rect.width-12*this._sizeGrid)/2),this._posY=Math.floor((a.rect.height-8*this._sizeGrid)/2));this._elements_posX=[null,null,null,null,
null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];this._elements_posY=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];this._elements_size=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];if(!0===this._isWide)for(var b=0;24>b;b++)this._elements_posX[b]=this._posX+b%6*this._sizeGrid*2,this._elements_posY[b]=
this._posY+2*this._sizeGrid*Math.floor(b/6),this._elements_size[b]=2*this._sizeGrid;else for(b=0;24>b;b++)this._elements_posX[b]=this._posX+b%4*this._sizeGrid*2,this._elements_posY[b]=this._posY+2*this._sizeGrid*Math.floor(b/4),this._elements_size[b]=2*this._sizeGrid;var c=this._elements.length;for(b=0;b<c;b++)this._elements[b].resize({ctx:a.ctx,rect:{x:this._elements_posX[b],y:this._elements_posY[b],width:this._elements_size[b],height:this._elements_size[b]},color:a.color});a.ctx.lineWidth=.02*this._sizeGrid};
a.prototype.Template2.prototype.draw=function(){this._drawer.ctx.fillStyle=this._drawer.color.disable;this._drawer.ctx.fillRect(this._drawer.rect.x,this._drawer.rect.y,this._drawer.rect.width,this._drawer.rect.height);for(var a=this._elements.length,d=0;d<a;d++)this._elements[d].draw()};a.prototype.Template2.create=function(a,d){d=d||this.prototype;d=Object.create(d);d._elements=a;return d};a.prototype.Element=Object.create(Object.prototype);a.prototype.Element.prototype=Object.create(Object.prototype);
a.prototype.Element.prototype.change=function(a){};a.prototype.Element.prototype.point=function(a){};a.prototype.Element.prototype.movepoint=function(a){};a.prototype.Element.prototype.disable=function(){this._drawer=null};a.prototype.Element.prototype.resize=function(a){this._drawer=a};a.prototype.Element.prototype.draw=function(){};a.prototype.Element.prototype._update=function(){this.change();null!==this._drawer&&this.draw()};a.prototype.Element.create=function(a){a=a||this.prototype;a=Object.create(a);
a._drawer=null;return a};a.prototype.Button=Object.create(Object.prototype);a.prototype.Button.prototype=Object.create(a.prototype.Element.prototype);a.prototype.Button.prototype.change=function(){};a.prototype.Button.prototype.select=function(){};a.prototype.Button.prototype.point=function(a){0!==this._score&&this.select()};a.prototype.Button.prototype.movepoint=function(a){};a.prototype.Button.prototype._draw_frame=function(){this._drawer.ctx.strokeStyle="rgb(0,0,0)";this._drawer.ctx.fillStyle=
0>this._score?"rgb(255,255,255)":0===this._score?this._drawer.color.disable:this._drawer.color.enable;this._drawer.ctx.fillRect(this._drawer.rect.x,this._drawer.rect.y,this._drawer.rect.width,this._drawer.rect.height);this._drawer.ctx.strokeRect(this._drawer.rect.x,this._drawer.rect.y,this._drawer.rect.width,this._drawer.rect.height);-2!==this._score&&2!==this._score||this._drawer.ctx.strokeRect(this._drawer.rect.x+.1*this._drawer.rect.width,this._drawer.rect.y+.1*this._drawer.rect.height,.8*this._drawer.rect.width,
.8*this._drawer.rect.height)};a.prototype.Button.prototype.draw=function(){this._draw_frame();this._drawer.ctx.fillStyle="rgb(0,0,0)";this._drawer.ctx.textAlign="center";this._drawer.ctx.textBaseline="middle";this._drawer.ctx.font=.3*this._drawer.rect.width+"px sans-serif";this._drawer.ctx.fillText(this._string,this._drawer.rect.x+.5*this._drawer.rect.width,this._drawer.rect.y+.5*this._drawer.rect.height,this._drawer.rect.width)};a.prototype.Button.prototype.setString=function(a){this._string=a;this._update()};
a.prototype.Button.prototype.getScore=function(a){return this._score};a.prototype.Button.prototype.setScore=function(a){this._score=a;this._update()};a.prototype.Button.create=function(b,d,c){c=c||this.prototype;c=a.prototype.Element.create(c);c._string=b;c._score=d;return c};a.prototype.ButtonVolume=Object.create(Object.prototype);a.prototype.ButtonVolume.prototype=Object.create(a.prototype.Button.prototype);a.prototype.ButtonVolume.prototype.setScore=function(a){this._score=a;this._upper===this._lower&&
(this._score=0);this._update()};a.prototype.ButtonVolume.prototype.point=function(a){if(0!==this._score){if(a.pos.x<a.rect.x+.5*a.rect.width){if(this._value===this._lower)return;--this._value}else{if(this._value===this._upper)return;this._value+=1}this._update()}};a.prototype.ButtonVolume.prototype.draw=function(){this._draw_frame();this._drawer.ctx.fillStyle="rgb(0,0,0)";this._drawer.ctx.font=.2*this._drawer.rect.width+"px sans-serif";this._drawer.ctx.fillText(this._string,this._drawer.rect.x+.5*
this._drawer.rect.width,this._drawer.rect.y+.2*this._drawer.rect.height,this._drawer.rect.width);this._drawer.ctx.font=.4*this._drawer.rect.width+"px sans-serif";this._drawer.ctx.fillText(this._value,this._drawer.rect.x+.5*this._drawer.rect.width,this._drawer.rect.y+.65*this._drawer.rect.height,this._drawer.rect.width);this._drawer.ctx.font=.3*this._drawer.rect.width+"px sans-serif";0!==this._score&&(this._value!==this._lower&&this._drawer.ctx.fillText("-",this._drawer.rect.x+.1*this._drawer.rect.width,
this._drawer.rect.y+.65*this._drawer.rect.height,this._drawer.rect.width),this._value!==this._upper&&this._drawer.ctx.fillText("+",this._drawer.rect.x+.9*this._drawer.rect.width,this._drawer.rect.y+.65*this._drawer.rect.height,this._drawer.rect.width))};a.prototype.ButtonVolume.prototype.setValue=function(a,d,c){this._lower=d;this._upper=a;this._value=c;this._update()};a.prototype.ButtonVolume.create=function(b,d,c,e,f){f=f||this.prototype;e>d&&(e=d);e<c&&(e=c);b=a.prototype.Button.create(b,d!==c?
1:0,f);b._upper=d;b._lower=c;b._value=e;return b};a.prototype.ButtonProgress=Object.create(Object.prototype);a.prototype.ButtonProgress.prototype=Object.create(a.prototype.Button.prototype);a.prototype.ButtonProgress.prototype.setScore=function(a){this._score=a;this._update()};a.prototype.ButtonProgress.prototype.isProcessing=function(){return null!==this._work};a.prototype.ButtonProgress.prototype.draw=function(){this._draw_frame();null===this._work||!0===this._work.stop?(this._drawer.ctx.fillStyle=
"rgb(0,0,0)",this._drawer.ctx.textAlign="center",this._drawer.ctx.textBaseline="middle",this._drawer.ctx.font=.3*this._drawer.rect.width+"px sans-serif",this._drawer.ctx.fillText(this._string,this._drawer.rect.x+.5*this._drawer.rect.width,this._drawer.rect.y+.5*this._drawer.rect.height,this._drawer.rect.width)):(this._drawer.ctx.fillStyle="rgb(0,0,0)",this._drawer.ctx.textAlign="center",this._drawer.ctx.textBaseline="middle",this._drawer.ctx.font=.3*this._drawer.rect.width+"px sans-serif",this._drawer.ctx.fillText(this._string,
this._drawer.rect.x+.5*this._drawer.rect.width,this._drawer.rect.y+.45*this._drawer.rect.height,this._drawer.rect.width),this._drawer.ctx.fillStyle="rgb(255,255,255)",this._drawer.ctx.fillRect(this._drawer.rect.x,this._drawer.rect.y+.75*this._drawer.rect.height,this._drawer.rect.width,.1*this._drawer.rect.height),!1!==this._work.progress?(this._drawer.ctx.fillStyle=this._drawer.color.enable,this._drawer.ctx.fillRect(this._drawer.rect.x,this._drawer.rect.y+.75*this._drawer.rect.height,this._drawer.rect.width*
this._work.progress,.1*this._drawer.rect.height)):(this._drawer.ctx.fillStyle=this._drawer.color.disable,this._drawer.ctx.fillRect(this._drawer.rect.x,this._drawer.rect.y+.75*this._drawer.rect.height,this._drawer.rect.width,.1*this._drawer.rect.height)),this._drawer.ctx.strokeRect(this._drawer.rect.x,this._drawer.rect.y+.75*this._drawer.rect.height,this._drawer.rect.width,.1*this._drawer.rect.height))};a.prototype.ButtonProgress.prototype.start=function(){};a.prototype.ButtonProgress.prototype.stop=
function(){this.finish()};a.prototype.ButtonProgress.prototype.finish=function(a){this._work=null;this._string=this._stringIdoling;this._score=1;this._update()};a.prototype.ButtonProgress.prototype.progress=function(a){this._work.progress=a;this._update()};a.prototype.ButtonProgress.prototype.select=function(){null===this._work?(this._work={progress:0},this._string=this._stringProcessing,this._score=-1,this._update(),this.start()):(this._work.stop=!0,this._string=this._stringStopping,this._score=
0,this._update(),this.stop())};a.prototype.ButtonProgress.create=function(b,d,c,e){e=e||this.prototype;c=a.prototype.Button.create(b,c,e);c._work=null;c._stringIdoling=b;c._stringProcessing=d;c._stringStopping="Aborting";return c};a.prototype.ButtonToggle=Object.create(Object.prototype);a.prototype.ButtonToggle.prototype=Object.create(a.prototype.Button.prototype);a.prototype.ButtonToggle.prototype.setScore=function(a){this._score=a;1===this._items.length&&(this._score=0);this._update()};a.prototype.ButtonToggle.prototype.setItem=
function(a){this._item=a;this._update()};a.prototype.ButtonToggle.prototype.disable=function(){this._drawer=null;for(var a=this._items.length,d=0;d<a;d++)this._items[d].disable()};a.prototype.ButtonToggle.prototype.resize=function(a){this._drawer=a;a={ctx:a.ctx,rect:{x:a.rect.x+.25*a.rect.width,y:a.rect.y+.4*a.rect.height,width:.5*a.rect.width,height:.5*a.rect.height},color:a.color};for(var b=this._items.length,c=0;c<b;c++)this._items[c].resize(a)};a.prototype.ButtonToggle.prototype.point=function(a){0!==
this._score&&(this._item=a.pos.x<a.rect.x+.5*a.rect.width?this._item.prev:this._item.next,this._update())};a.prototype.ButtonToggle.prototype.draw=function(){this._draw_frame();this._drawer.ctx.fillStyle="rgb(0,0,0)";this._drawer.ctx.textAlign="center";this._drawer.ctx.textBaseline="middle";this._drawer.ctx.font=.2*this._drawer.rect.width+"px sans-serif";this._drawer.ctx.fillText(this._string,this._drawer.rect.x+.5*this._drawer.rect.width,this._drawer.rect.y+.2*this._drawer.rect.height,this._drawer.rect.width);
this._item.draw();0!==this._score&&(this._drawer.ctx.fillStyle="rgb(0,0,0)",this._drawer.ctx.font=.3*this._drawer.rect.width+"px sans-serif",this._drawer.ctx.fillText("<",this._drawer.rect.x+.1*this._drawer.rect.width,this._drawer.rect.y+.65*this._drawer.rect.height,this._drawer.rect.width),this._drawer.ctx.font=.3*this._drawer.rect.width+"px sans-serif",this._drawer.ctx.fillText(">",this._drawer.rect.x+.9*this._drawer.rect.width,this._drawer.rect.y+.65*this._drawer.rect.height,this._drawer.rect.width))};
a.prototype.ButtonToggle.prototype.add=function(a){this._items.push(a)};a.prototype.ButtonToggle.create=function(b,d,c){c=c||this.prototype;var e=d.length;b=a.prototype.Button.create(b,1!==e?1:0,c);b._items=d;b._item=d[0];for(c=1;c<e;c++)d[c-1].next=d[c],d[c].prev=d[c-1];d[c-1].next=d[0];d[0].prev=d[c-1];return b};a.prototype.ToggleItem=Object.create(Object.prototype);a.prototype.ToggleItem.prototype=Object.create(a.prototype.Element.prototype);a.prototype.ToggleItem.create=function(b,d){d=d||this.prototype;
d=a.prototype.Element.create(d);d._value=b;return d};a.prototype.Popup=Object.create(Object.prototype);a.prototype.Popup.prototype=Object.create(a.prototype.Element.prototype);a.prototype.Popup.prototype.disable=function(){this._template.disable()};a.prototype.Popup.prototype.open=function(a){this._parent._popup_active=this;this._parent.resize();this._parent.draw()};a.prototype.Popup.prototype.close=function(a){this._parent._popup_active=null;this._parent.resize();this._parent.draw()};a.prototype.Popup.prototype.point=
function(a){this._template.point(a)};a.prototype.Popup.prototype.movepoint=function(a){this._template.movepoint(a)};a.prototype.Popup.prototype.resize=function(a){this._template.resize(a)};a.prototype.Popup.prototype.draw=function(){this._template.draw()};a.prototype.Popup.prototype.setTemplate=function(a){this._template=a};a.prototype.Popup.create=function(b,d){d=d||this.prototype;d=a.prototype.Element.create(d);d._template=b;return d};a.create=function(b,d){e=Object.create(a.prototype);e.setCanvas(b);
e._main=null;e._popups=[];e._popup_active=null;e.plugin={};b=d.length;for(var c=0;c<b;c++)d[c](e);return e};return a.create}();"use strict";
var JSprinCore=function(e){e.plugin.JSprinCore={};e.plugin.JSprinCore.ReversiBoard=Object.create(Object.prototype);e.plugin.JSprinCore.ReversiBoard.prototype=Object.create(e.Element.prototype);e.plugin.JSprinCore.ReversiBoard.prototype.getCell=function(a,b){return this._cell[a][b]};e.plugin.JSprinCore.ReversiBoard.prototype.setCell=function(a,b,d){this._cell[a][b]=d;this._resetCellValues()};e.plugin.JSprinCore.ReversiBoard.prototype._resetCellValues=function(){this._valueMaxCell=this._valuesCell=
null};e.plugin.JSprinCore.ReversiBoard.prototype.getEnabled=function(){return this._enabled};e.plugin.JSprinCore.ReversiBoard.prototype.setEnabled=function(a){this._enabled=a;this._update()};e.plugin.JSprinCore.ReversiBoard.prototype.setCellValues=function(a){this._valuesCell=a;this._update()};e.plugin.JSprinCore.ReversiBoard.prototype.setMaxCell=function(a,b){this._valueMaxCell={x:a,y:b};this._update()};e.plugin.JSprinCore.ReversiBoard.prototype.getBoard=function(){for(var a="",b=0;8>b;b++)for(var d=
0;8>d;d++)this._cell[d][b]===this.color.Black?a=a.concat("X"):this._cell[d][b]===this.color.White?a=a.concat("O"):this._cell[d][b]===this.color.Empty?a=a.concat("-"):this._cell[d][b]===this.color.None&&(a=a.concat("="));return a};e.plugin.JSprinCore.ReversiBoard.prototype.setBoard=function(a){for(var b=0;8>b;b++)for(var d=0;8>d;d++){var c=a.charAt(8*b+d);if("X"===c)this._cell[d][b]=this.color.Black;else if("O"===c)this._cell[d][b]=this.color.White;else if("-"===c)this._cell[d][b]=this.color.Empty;
else if("="===c)this._cell[d][b]=this.color.None;else return!1}this._resetCellValues();this._update();return!0};e.plugin.JSprinCore.ReversiBoard.prototype.pointCell=function(a){};e.plugin.JSprinCore.ReversiBoard.prototype.point=function(a){if(!1===this._enabled)return!1;for(var b,d,c=0;8>c;c++)if(a.pos.x<=a.rect.x+a.rect.width*(c+1)/8){b=c;break}for(c=0;8>c;c++)if(a.pos.y<=a.rect.y+a.rect.height*(c+1)/8){d=c;break}this.pointCell({x:b,y:d})};e.plugin.JSprinCore.ReversiBoard.prototype.movepointCell=
function(a){};e.plugin.JSprinCore.ReversiBoard.prototype.movepoint=function(a){if(!1===this._enabled)return!1;for(var b,d,c=0;8>c;c++)if(a.pos.x<=a.rect.x+a.rect.width*(c+1)/8){b=c;break}for(c=0;8>c;c++)if(a.pos.y<=a.rect.y+a.rect.height*(c+1)/8){d=c;break}this.movepointCell({x:b,y:d})};e.plugin.JSprinCore.ReversiBoard.prototype.draw=function(){this._drawer.ctx.strokeStyle="rgb(0,0,0)";for(var a=0;8>a;a++){for(var b=0;8>b;b++)this._cell[a][b]===this.color.None?(this._drawer.ctx.fillStyle="rgb(255,255,255)",
this._drawer.ctx.fillRect(this._drawer.rect.x+this._drawer.rect.width/8*a,this._drawer.rect.y+this._drawer.rect.height/8*b,this._drawer.rect.width/8,this._drawer.rect.height/8),this._drawer.ctx.strokeRect(this._drawer.rect.x+this._drawer.rect.width/8*a,this._drawer.rect.y+this._drawer.rect.height/8*b,this._drawer.rect.width/8,this._drawer.rect.height/8)):(this._drawer.ctx.fillStyle=!1===this._enabled?this._drawer.color.disable:this._drawer.color.enable,this._drawer.ctx.fillRect(this._drawer.rect.x+
this._drawer.rect.width/8*a,this._drawer.rect.y+this._drawer.rect.height/8*b,this._drawer.rect.width/8,this._drawer.rect.height/8),this._drawer.ctx.strokeRect(this._drawer.rect.x+this._drawer.rect.width/8*a,this._drawer.rect.y+this._drawer.rect.height/8*b,this._drawer.rect.width/8,this._drawer.rect.height/8),this._cell[a][b]===this.color.Empty?null!==this._valueMaxCell&&this._valueMaxCell.x===a&&this._valueMaxCell.y===b&&this._drawer.ctx.strokeRect(this._drawer.rect.x+this._drawer.rect.width/8*a+
.0125*this._drawer.rect.width,this._drawer.rect.y+this._drawer.rect.height/8*b+.0125*this._drawer.rect.height,.1*this._drawer.rect.width,.1*this._drawer.rect.height):(this._cell[a][b]===this.color.Black?this._drawer.ctx.fillStyle="rgb(0,0,0)":this._cell[a][b]===this.color.White&&(this._drawer.ctx.fillStyle="rgb(255,255,255)"),this._drawer.ctx.beginPath(),this._drawer.ctx.arc(this._drawer.rect.x+this._drawer.rect.width/8*(a+.5),this._drawer.rect.y+this._drawer.rect.height/8*(b+.5),.05625*this._drawer.rect.width,
0,2*Math.PI,!1),this._drawer.ctx.fill(),this._drawer.ctx.stroke()));if(null!==this._valuesCell){this._drawer.ctx.fillStyle="rgb(0,0,0)";this._drawer.ctx.font=.0625*this._drawer.rect.width+"px sans-serif";this._drawer.ctx.textAlign="center";this._drawer.ctx.textBaseline="middle";b=this._valuesCell.length;for(var d=0;d<b;d++){var c="";0<this._valuesCell[d].value&&(c="+");this._drawer.ctx.fillText(c+this._valuesCell[d].value,this._drawer.rect.x+this._drawer.rect.width/8*(this._valuesCell[d].x+.5),this._drawer.rect.y+
this._drawer.rect.height/8*(this._valuesCell[d].y+.5),.125*this._drawer.rect.width)}}}};e.plugin.JSprinCore.ReversiBoard.prototype.color={Black:0,White:1,Empty:2,None:3};e.plugin.JSprinCore.ReversiBoard.create=function(a){a=a||e.plugin.JSprinCore.ReversiBoard.prototype;a=e.Element.create(a);a._cell=[[a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty],[a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,
a.color.Empty],[a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty],[a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty],[a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty],[a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty],[a.color.Empty,a.color.Empty,a.color.Empty,
a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty],[a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty,a.color.Empty]];a._valuesCell=null;a._valueMaxCell=null;a._enabled=!0;return a};e.plugin.JSprinCore.ReversiGame=Object.create(Object.prototype);e.plugin.JSprinCore.ReversiGame.prototype=Object.create(e.Element.prototype);e.plugin.JSprinCore.ReversiGame.create=function(a,b){b=b||e.plugin.JSprinCore.ReversiGame.prototype;var d=e.Element.create(b);
d._board=e.plugin.JSprinCore.ReversiBoard.create();d._board.pointCell=function(a){d._move(a.x,a.y)};d._board.movepointCell=function(a){};d._reset(a);d._enabled=!0;return d};e.plugin.JSprinCore.ReversiGame.prototype.isGameOver=function(){return this._turn===this._board.color.Empty};e.plugin.JSprinCore.ReversiGame.prototype.getEnabled=function(){return this._board.getEnabled()};e.plugin.JSprinCore.ReversiGame.prototype.setEnabled=function(a){this._board.setEnabled(a);this._enabled=a;this._update()};
e.plugin.JSprinCore.ReversiGame.prototype.setCellValues=function(a){this._board.setCellValues(a)};e.plugin.JSprinCore.ReversiGame.prototype.setMaxCell=function(a,b){this._board.setMaxCell(a,b)};e.plugin.JSprinCore.ReversiGame.prototype.getBoard=function(){var a=this._board.getBoard();a=a.concat("t");this._turn===this._board.color.Black?a=a.concat("X"):this._turn===this._board.color.White?a=a.concat("O"):this._turn===this._board.color.Empty&&(a=a.concat("-"));return a};e.plugin.JSprinCore.ReversiGame.prototype.setBoard=
function(a){return!0===this._restore(a)?(this._history_update(),this._update(),!0):!1};e.plugin.JSprinCore.ReversiGame.prototype.change=function(a){};e.plugin.JSprinCore.ReversiGame.prototype.point=function(a){this._board.point(a)};e.plugin.JSprinCore.ReversiGame.prototype.movepoint=function(a){this._board.movepoint(a)};e.plugin.JSprinCore.ReversiGame.prototype.disable=function(a){this._drawer=null;this._board.disable()};e.plugin.JSprinCore.ReversiGame.prototype.resize=function(a){this._drawer=a;
this._board.resize(a)};e.plugin.JSprinCore.ReversiGame.prototype.draw=function(a){this._board.draw(a)};e.plugin.JSprinCore.ReversiGame.prototype.init=function(a){this._reset(a);this._update()};e.plugin.JSprinCore.ReversiGame.prototype._reset=function(a){a=a||"---------------------------OX------XO---------------------------tX";this._history=[a];this._history_str=[""];!1===this._restore(a)&&this._restore("---------------------------OX------XO---------------------------tX");this._history_pos=0};e.plugin.JSprinCore.ReversiGame.prototype.canundo=
function(){return!0===this._enabled&&0<this._history_pos};e.plugin.JSprinCore.ReversiGame.prototype.undoall=function(){this._history_pos=0;this._restore(this._history[this._history_pos]);this._update();return!0};e.plugin.JSprinCore.ReversiGame.prototype.undo=function(){if(0===this._history_pos)return!1;--this._history_pos;this._restore(this._history[this._history_pos]);this._update();return!0};e.plugin.JSprinCore.ReversiGame.prototype.canredo=function(){return!0===this._enabled&&this._history_pos<
this._history.length-1};e.plugin.JSprinCore.ReversiGame.prototype.redoall=function(){this._history_pos=this._history.length-1;this._restore(this._history[this._history_pos]);this._update();return!0};e.plugin.JSprinCore.ReversiGame.prototype.redo=function(){if(this._history_pos===this._history.length-1)return!1;this._history_pos+=1;this._restore(this._history[this._history_pos]);this._update();return!0};e.plugin.JSprinCore.ReversiGame.prototype._canmove_rec=function(a,b,d,c,e,f){if(0>a+d||7<a+d||0>
b+c||7<b+c)return!1;if(this._board.getCell(a+d,b+c)===e)return!0;if(this._board.getCell(a+d,b+c)===f)return this._canmove_rec(a+d,b+c,d,c,e,f);if(this._board.getCell(a+d,b+c)===this._board.color.Empty)return!1};e.plugin.JSprinCore.ReversiGame.prototype._canmove=function(a,b){if(this._board.getCell(a,b)!==this._board.color.Empty||this._turn!==this._board.color.Black&&this._turn!==this._board.color.White)return!1;var d=this._turn;if(d===this._board.color.Black)var c=this._board.color.White;else if(d===
this._board.color.White)c=this._board.color.Black;else return!1;for(var e=-1;1>=e;e++)for(var f=-1;1>=f;f++)if((0!==e||0!==f)&&0<=a+e&&7>=a+e&&0<=b+f&&7>=b+f&&this._board.getCell(a+e,b+f)===c&&!0===this._canmove_rec(a+e,b+f,e,f,d,c))return!0;return!1};e.plugin.JSprinCore.ReversiGame.prototype._move_rec=function(a,b,d,c,e,f){if(0>a+d||7<a+d||0>b+c||7<b+c)return!1;if(this._board.getCell(a+d,b+c)===e)return this._board.setCell(a,b,e),!0;if(this._board.getCell(a+d,b+c)===f)return!0===this._move_rec(a+
d,b+c,d,c,e,f)?(this._board.setCell(a,b,e),!0):!1;if(this._board.getCell(a+d,b+c)===this._board.color.Empty)return!1};e.plugin.JSprinCore.ReversiGame.prototype._isPass=function(){for(var a=0;8>a;a++)for(var b=0;8>b;b++)if(!0===this._canmove(a,b))return!1;return!0};e.plugin.JSprinCore.ReversiGame.prototype._move=function(a,b){if(this._board.getCell(a,b)!==this._board.color.Empty||this._turn!==this._board.color.Black&&this._turn!==this._board.color.White)return!1;var d=this._turn;if(d===this._board.color.Black)var c=
this._board.color.White;else if(d===this._board.color.White)c=this._board.color.Black;else return!1;for(var e=!1,f=-1;1>=f;f++)for(var g=-1;1>=g;g++)(0!==f||0!==g)&&0<=a+f&&7>=a+f&&0<=b+g&&7>=b+g&&this._board.getCell(a+f,b+g)===c&&!0===this._move_rec(a+f,b+g,f,g,d,c)&&(this._board.setCell(a,b,d),e=!0);return!0===e?(this._turn=c,this._update_turn(),this._history_update(a,b),this._board._resetCellValues(),this._update(),!0):!1};e.plugin.JSprinCore.ReversiGame.prototype._update_turn=function(){if(this._turn===
this._board.color.Black)var a=this._board.color.White;else this._turn===this._board.color.White&&(a=this._board.color.Black);!0===this._isPass()&&(this._turn=a,!0===this._isPass()&&(this._turn=this._board.color.Empty))};e.plugin.JSprinCore.ReversiGame.prototype._getStringMove=function(a,b){if(2>b.length)return!1;var d=b.charAt(0),c=b.charAt(1);if("a"===d||"A"===d)a=0;else if("b"===d||"B"===d)a=1;else if("c"===d||"C"===d)a=2;else if("d"===d||"D"===d)a=3;else if("e"===d||"E"===d)a=4;else if("f"===d||
"F"===d)a=5;else if("g"===d||"G"===d)a=6;else if("h"===d||"H"===d)a=7;else{if("z"===d){for(b=b.slice(1);"z"!==b.charAt(0);)if("t"===b.charAt(0)){if(2>b.length)return!1;a=a.slice(0,65).concat(b.charAt(1)).concat(a.slice(66));b=b.slice(2)}else{b=this._getStringMove(a,b);if(!1===b||!0===b.isFree||""===b.str)return!1;if("X"===b.str.charAt(0)||"O"===b.str.charAt(0)||"-"===b.str.charAt(0)||"="===b.str.charAt(0))a=a.slice(0,b.x+8*b.y).concat(b.str.charAt(0)).concat(a.slice(b.x+8*b.y+1));b=b.str.slice(1)}return{isFree:!0,
board:a,str:b.slice(1)}}return"Z"===d?67<b.length&&"Z"===b.charAt(67)?{isFree:!0,board:b.slice(1,67),str:b.slice(68)}:!1:!1}if("1"===c)c=0;else if("2"===c)c=1;else if("3"===c)c=2;else if("4"===c)c=3;else if("5"===c)c=4;else if("6"===c)c=5;else if("7"===c)c=6;else if("8"===c)c=7;else return!1;return{isFree:!1,x:a,y:c,str:b.slice(2)}};e.plugin.JSprinCore.ReversiGame.prototype._getCellString=function(a,b){return"".concat("abcdefgh".charAt(a)).concat("12345678".charAt(b))};e.plugin.JSprinCore.ReversiGame.prototype._getEditString=
function(a,b){if(66!==a.length||66!==b.length)return!1;for(var d=[],c=0;8>c;c++)for(var e=0;8>e;e++)a.charAt(c+8*e)!==b.charAt(c+8*e)&&d.push({turn:!1,x:c,y:e,char:b.charAt(c+8*e)});a.charAt(65)!==b.charAt(65)&&d.push({turn:!0,char:b.charAt(65)});a=d.length;if(23>a){b="z";for(c=0;c<a;c++)b=!1===d[c].turn?b+this._getCellString(d[c].x,d[c].y)+d[c].char:b+"t"+d[c].char;return b=b.concat("z")}return"Z".concat(b).concat("Z")};e.plugin.JSprinCore.ReversiGame.prototype._history_update=function(a,b){this._history.length-
1!==this._history_pos&&(this._history=this._history.slice(0,this._history_pos+1),this._history_str=this._history_str.slice(0,this._history_pos+1));this._history.push(this.getBoard());void 0===a?this._history_str.push(this._getEditString(this._history[this._history_pos],this.getBoard())):this._history_str.push(this._getCellString(a,b));this._history_pos+=1;return!0};e.plugin.JSprinCore.ReversiGame.prototype._restore=function(a){if(!1===this._board.setBoard(a.slice(0,64)))return!1;if("X"===a.charAt(65))this._turn=
this._board.color.Black;else if("O"===a.charAt(65))this._turn=this._board.color.White;else if("-"===a.charAt(65))this._turn=this._board.color.Empty;else return!1;this._update_turn();return!0};e.plugin.JSprinCore.ReversiGame.prototype.getHistoryString=function(){for(var a="",b=this._history.length,d=0;d<b;d++)a=a.concat(this._history_str[d]);return a};e.plugin.JSprinCore.ReversiGame.prototype.setHistoryString=function(a){var b=this.getHistory();this._restore("---------------------------OX------XO---------------------------tX");
this._history_pos=0;this._history=["---------------------------OX------XO---------------------------tX"];this._history_str=[""];for(a={str:a};;){if(""===a.str)return this._update(),!0;a=this._getStringMove(this.getBoard(),a.str);if(!1===a)break;if(!0===a.isFree){if(!1===this.setBoard(a.board))break}else if(!1===this._move(a.x,a.y))break}this.setHistory(b);this._update();return!1};e.plugin.JSprinCore.ReversiGame.prototype.getHistory=function(){return JSON.stringify({board:this._history,str:this._history_str,
pos:this._history_pos})};e.plugin.JSprinCore.ReversiGame.prototype.setHistory=function(a){a=JSON.parse(a);this._history=a.board;this._history_str=a.str;this._history_pos=a.pos;this._restore(this._history[this._history_pos]);this._update()};e.plugin.JSprinCore.ReversiStatus=Object.create(Object.prototype);e.plugin.JSprinCore.ReversiStatus.prototype=Object.create(e.Button.prototype);e.plugin.JSprinCore.ReversiStatus.create=function(a){a=a||e.plugin.JSprinCore.ReversiStatus.prototype;return e.Button.create("status",
0,a)};e.plugin.JSprinCore.ReversiStatus.prototype.resize=function(a){this._drawer=a};e.plugin.JSprinCore.ReversiStatus.prototype.draw=function(){this._drawer.ctx.strokeStyle="rgb(0,0,0)";this._drawer.ctx.fillStyle=this._drawer.color.disable;this._drawer.ctx.fillRect(this._drawer.rect.x,this._drawer.rect.y,this._drawer.rect.width,this._drawer.rect.height);this._drawer.ctx.strokeRect(this._drawer.rect.x,this._drawer.rect.y,this._drawer.rect.width,this._drawer.rect.height);this._turn===this._color.Empty?
(this._drawer.ctx.fillStyle=this._drawer.color.enable,this._drawer.ctx.fillRect(this._drawer.rect.x+.07*this._drawer.rect.width,this._drawer.rect.y+.17*this._drawer.rect.height,.26*this._drawer.rect.width,.26*this._drawer.rect.height),this._drawer.ctx.strokeRect(this._drawer.rect.x+.07*this._drawer.rect.width,this._drawer.rect.y+.17*this._drawer.rect.height,.26*this._drawer.rect.width,.26*this._drawer.rect.height),this._drawer.ctx.fillStyle=this._drawer.color.enable,this._drawer.ctx.fillRect(this._drawer.rect.x+
.67*this._drawer.rect.width,this._drawer.rect.y+.17*this._drawer.rect.height,.26*this._drawer.rect.width,.26*this._drawer.rect.height),this._drawer.ctx.strokeRect(this._drawer.rect.x+.67*this._drawer.rect.width,this._drawer.rect.y+.17*this._drawer.rect.height,.26*this._drawer.rect.width,.26*this._drawer.rect.height),this._drawer.ctx.fillStyle="rgb(0,0,0)",this._drawer.ctx.beginPath(),this._drawer.ctx.arc(this._drawer.rect.x+.2*this._drawer.rect.width,this._drawer.rect.y+.3*this._drawer.rect.height,
.117*this._drawer.rect.width,2*Math.PI,!1),this._drawer.ctx.fill(),this._drawer.ctx.stroke(),this._drawer.ctx.fillStyle="rgb(255,255,255)",this._drawer.ctx.beginPath(),this._drawer.ctx.arc(this._drawer.rect.x+.8*this._drawer.rect.width,this._drawer.rect.y+.3*this._drawer.rect.height,.117*this._drawer.rect.width,2*Math.PI,!1),this._drawer.ctx.fill(),this._drawer.ctx.stroke(),this._drawer.ctx.fillStyle="rgb(0,0,0)",this._drawer.ctx.font=.3*this._drawer.rect.width+"px sans-serif",this._drawer.ctx.fillText(this._countBlack,
this._drawer.rect.x+.2*this._drawer.rect.width,this._drawer.rect.y+.65*this._drawer.rect.height,this._drawer.rect.width),this._drawer.ctx.fillText("-",this._drawer.rect.x+.5*this._drawer.rect.width,this._drawer.rect.y+.65*this._drawer.rect.height,this._drawer.rect.width),this._drawer.ctx.fillText(this._countWhite,this._drawer.rect.x+.8*this._drawer.rect.width,this._drawer.rect.y+.65*this._drawer.rect.height,this._drawer.rect.width)):(this._drawer.ctx.fillStyle="rgb(0,0,0)",this._drawer.ctx.font=.25*
this._drawer.rect.width+"px sans-serif",this._drawer.ctx.fillText("Turn",this._drawer.rect.x+.5*this._drawer.rect.width,this._drawer.rect.y+.2*this._drawer.rect.height,this._drawer.rect.width),this._drawer.ctx.fillStyle=this._drawer.color.enable,this._drawer.ctx.fillRect(this._drawer.rect.x+.25*this._drawer.rect.width,this._drawer.rect.y+.4*this._drawer.rect.height,.5*this._drawer.rect.width,.5*this._drawer.rect.height),this._drawer.ctx.strokeStyle="rgb(0,0,0)",this._drawer.ctx.strokeRect(this._drawer.rect.x+
.25*this._drawer.rect.width,this._drawer.rect.y+.4*this._drawer.rect.height,.5*this._drawer.rect.width,.5*this._drawer.rect.height),this._drawer.ctx.fillStyle=this._turn===this._color.Black?"rgb(0,0,0)":"rgb(255,255,255)",this._drawer.ctx.beginPath(),this._drawer.ctx.arc(this._drawer.rect.x+.5*this._drawer.rect.width,this._drawer.rect.y+.65*this._drawer.rect.height,.225*this._drawer.rect.width,2*Math.PI,!1),this._drawer.ctx.fill(),this._drawer.ctx.stroke())};e.plugin.JSprinCore.ReversiStatus.prototype._setData=
function(a,b){this._turn=a;this._countEmpty=this._countWhite=this._countBlack=0;this._color=b.color;for(a=0;8>a;a++)for(var d=0;8>d;d++)b.getCell(a,d)===b.color.Black?this._countBlack+=1:b.getCell(a,d)===b.color.White?this._countWhite+=1:b.getCell(a,d)===b.color.Empty&&(this._countEmpty+=1)};e.plugin.JSprinCore.ReversiStatus.prototype.update=function(a,b){this._setData(a,b);this._update()};e.plugin.JSprinCore.ReversiDisk=Object.create(Object.prototype);e.plugin.JSprinCore.ReversiDisk.prototype=Object.create(e.ToggleItem.prototype);
e.plugin.JSprinCore.ReversiDisk.prototype.draw=function(){this._score=this._value===e.plugin.JSprinCore.ReversiBoard.prototype.color.None?-1:1;e.Button.prototype._draw_frame.call(this);this._value!==e.plugin.JSprinCore.ReversiBoard.prototype.color.None&&this._value!==e.plugin.JSprinCore.ReversiBoard.prototype.color.Empty&&(this._value===e.plugin.JSprinCore.ReversiBoard.prototype.color.Black?this._drawer.ctx.fillStyle="rgb(0,0,0)":this._value===e.plugin.JSprinCore.ReversiBoard.prototype.color.White&&
(this._drawer.ctx.fillStyle="rgb(255,255,255)"),this._drawer.ctx.beginPath(),this._drawer.ctx.arc(this._drawer.rect.x+.5*this._drawer.rect.width,this._drawer.rect.y+.5*this._drawer.rect.height,.45*this._drawer.rect.width,2*Math.PI,!1),this._drawer.ctx.fill(),this._drawer.ctx.stroke())};e.plugin.JSprinCore.ReversiDisk.create=function(a,b){b=b||e.plugin.JSprinCore.ReversiDisk.prototype;return e.ToggleItem.create(a,b)}};"use strict";
var FEcipia={setup:function(e){e.setColor(240);var a=e.plugin.JSprinCore.ReversiGame.create();a.change=function(){b.setScore(!1===this._enabled?0:!0===this.canundo()?1:0);d.setScore(!1===this._enabled?0:!0===this.canredo()?1:0);c.setScore(this._enabled?1:0);!1===l.isProcessing()&&l.setScore(this._enabled?1:0);!1===g.isProcessing()&&g.setScore(!0===this.isGameOver()?0:1);x.update(this._turn,this._board);!1===this.isGameOver()&&!0===f&&!0===this.getEnabled()&&null===this._board._valueMaxCell?(h.onmessage=
function(b){var c="",d="";0<b.data.lower&&(c="+");0<b.data.upper&&(d="+");r.setString(c+b.data.lower+"/"+d+b.data.upper);a.setMaxCell(b.data.x,b.data.y);a.setEnabled(!0)},h.postMessage({kind:"search",board:a.getBoard()}),a.setEnabled(!1)):null===this._board._valueMaxCell&&r.setString("--/--")};var b=e.Button.create("<",1);b.select=function(){a.undo()};var d=e.Button.create(">",1);d.select=function(){a.redo()};var c=e.Button.create("Edit",1);c.select=function(){var b=a.getBoard();k.setBoard(b.slice(0,
64));"X"===b.charAt(65)?n.setItem(t):"O"===b.charAt(65)?n.setItem(y):"-"===b.charAt(65)&&n.setItem(t);u.setItem(z);p.open()};var h=null,f=!1,g=e.ButtonProgress.create("Evaluate","Evaluating",1);g.start=function(){null!==h?(a.setEnabled(!1),h.onmessage=function(b){"evaled"===b.data.kind?(g.finish(),a._board._resetCellValues(),f=!0,g.setString("Evaluate"),a.setEnabled(!0)):"evaling"===b.data.kind?g.progress(b.data.progress):console.log("ERROR:",b)},h.postMessage({kind:"eval",board:a.getBoard()}),g.stop=
function(){h.postMessage({kind:"eval_stop"})}):(g.setString("Preparing"),g.setScore(0),g.progress(!1),h=new Worker("FEcipia_eval.js"),h.onmessage=function(b){"initialized"===b.data.kind?h.postMessage({kind:"load",board:a.getBoard()}):"loaded"===b.data.kind?(g.finish(),g.setString("Evaluate"),c.setScore(1)):g.stop()},c.setScore(0),g.stop=function(){h.terminate();g.finish();h=null;c.setScore(1)})};var x=e.plugin.JSprinCore.ReversiStatus.create(),m=e.Button.create("About",1);m.select=function(){window.open("https://github.com/epsdel1994/cipia")};
var r=e.Button.create("--/--",0),l=e.ButtonProgress.create("Book import","Downloading",1);l.start=function(){var b=prompt('Input book URL to load.\n("cipia:last" to load the book downloaded last time.)');if(null!==b&&""!==b){var c=new Worker("FEcipia_eval.js");c.onmessage=function(d){"initialized"===d.data.kind?c.postMessage({kind:"book_download",url:b}):"book_downloaded"===d.data.kind?!0===d.data.isSuccess?(l.setString("Preparing"),l.progress(!1),c.postMessage({kind:"book_load"})):(alert("Failed to download book file."),
c.terminate(),a.setEnabled(!0),l.finish()):"book_loaded"===d.data.kind?(!0===d.data.isSuccess?(a.init(d.data.board),null!==h&&h.terminate(),h=c,f=!0):(alert("Failed to read book file."),c.terminate()),a.setEnabled(!0),l.finish()):"book_downloading"===d.data.kind&&l.progress(d.data.progress)};a.setEnabled(!1);g.setScore(0);l.stop=function(){c.terminate();a.setEnabled(!0);l.finish()}}else l.finish()};m=e.Popup.create(e.Template1.create([a,b,d,l,r,c,g,x,m]));e.setMain(m);var k=e.plugin.JSprinCore.ReversiBoard.create();
k.pointCell=function(a){this.setCell(a.x,a.y,v);this._update()};k.movepointCell=function(a){this.setCell(a.x,a.y,v);this._update()};var v=k.color.Black,w=k.color.Black,z=e.plugin.JSprinCore.ReversiDisk.create(k.color.Black);m=e.plugin.JSprinCore.ReversiDisk.create(k.color.White);var q=e.plugin.JSprinCore.ReversiDisk.create(k.color.Empty),A=e.plugin.JSprinCore.ReversiDisk.create(k.color.None),t=e.plugin.JSprinCore.ReversiDisk.create(k.color.Black),y=e.plugin.JSprinCore.ReversiDisk.create(k.color.White),
u=e.ButtonToggle.create("Put color",[z,m,q,A]);u.change=function(){v=this._item._value};var n=e.ButtonToggle.create("Turn",[t,y]);n.change=function(){w=this._item._value};m=e.Button.create("Apply",2);m.select=function(){var b=k.getBoard();b=b.concat("t");w===k.color.Black?b=b.concat("X"):w===k.color.White&&(b=b.concat("O"));null!==h&&(h.terminate(),h=null,f=!1);a.init(b);g.setString("Evaluate");0!==g.getScore()&&g.select();p.close()};q=e.Button.create("Back",-1);q.select=function(){p.close()};var p=
e.Popup.create(e.Template1.create([k,e.Button.create("",0),e.Button.create("",0),e.Button.create("",0),e.Button.create("",0),u,n,m,q]));e.setPopups([p]);a.change();g.select()}};kurumicl.onload=function(e){FEcipia.fwcyan=FWcyan(e,[JSprinCore]);FEcipia.setup(FEcipia.fwcyan)};kurumicl.onresize=function(){FEcipia.fwcyan.resize();FEcipia.fwcyan.draw()};
